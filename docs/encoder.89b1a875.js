parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"GYNY":[function(require,module,exports) {
importScripts("libflac3-1.3.2.min.js");var e,a=4096,n=1,t=44100,i=5,o=16,c=1,s=0,r=[],f=!1,l=!1,d=0,g=[];function u(e,a){r.push(e),s+=e.byteLength}function h(e){g.push(e),d+=e.length}function p(){if(0!=(e=Flac.init_libflac_encoder(t,n,o,i,0))){var a=Flac.init_encoder_stream(e,u);c&=0==a,console.log("flac init     : "+c),console.log("status encoder: "+a),l=!0}else console.error("Error initializing the encoder.")}function m(e){if(Flac.isReady()){if(g.length>0)for(var a=g.length,n=g.splice(0,a),t=0;t<a;++t)_(n[t]);_(e)}else g.push(e),console.info("buffered audio data for Flac encdoing")}function _(a){for(var t=a.length,i=new Uint32Array(t),o=new DataView(i.buffer),c=0,s=0;s<t;s++)o.setInt32(c,32767*a[s],!0),c+=4;var r=Flac.FLAC__stream_encoder_process_interleaved(e,i,i.length/n);1!=r&&console.log("Error: encode_buffer_pcm_as_flac returned false. "+r)}function b(e,a){var n=F(e,a);return new Blob([n],{type:"audio/flac"})}function v(e,a){for(var n=2*a,t=new ArrayBuffer(44+n),i=new DataView(t),o=e[0],c=o.length,s=0;s<c;++s)i.setUint8(s,o[s]);return i.setUint32(4,32+n,!0),i.setUint32(40,n,!0),U(i,44,e),new Blob([i],{type:"audio/wav"})}function w(e,a,n){for(var t=n.length,i=0;i<t;++i)e.setUint8(a+i,n.charCodeAt(i))}function F(e,a){for(var n=new Uint8Array(a),t=0,i=e.length,o=0;o<i;o++){var c=e[o];n.set(c,t),t+=c.length}return n}function U(e,a,n){for(var t,i,o,c,s=n.length,r=1;r<s;++r)for(i=(t=n[r]).length,o=0;o<i;++o,a+=2)c=Math.max(-1,Math.min(1,t[o])),e.setInt16(a,c<0?32768*c:32767*c,!0)}function y(){r.splice(0,r.length),s=0,g.splice(0,g.length),d=0}self.onmessage=function(a){switch(a.data.cmd){case"save_as_wavfile":0==l&&(f=!0);break;case"init":if(f){var u=new ArrayBuffer(44),_=new DataView(u);w(_,0,"RIFF"),w(_,8,"WAVE"),w(_,12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,1,!0),_.setUint16(22,1,!0),_.setUint32(24,a.data.config.samplerate,!0),_.setUint32(28,2*a.data.config.samplerate,!0),_.setUint16(32,4,!0),_.setUint16(34,16,!0),w(_,36,"data"),_.setUint32(4,10,!0),_.setUint32(40,10,!0),g.push(new Uint8Array(u))}else a.data.config||(a.data.config={bps:o,channels:n,samplerate:t,compression:i}),a.data.config.channels=a.data.config.channels?a.data.config.channels:n,a.data.config.samplerate=a.data.config.samplerate?a.data.config.samplerate:t,a.data.config.bps=a.data.config.bps?a.data.config.bps:o,a.data.config.compression=a.data.config.compression?a.data.config.compression:i,i=a.data.config.compression,o=a.data.config.bps,t=a.data.config.samplerate,n=a.data.config.channels,Flac.isReady()?p():Flac.onready=function(){setTimeout(function(){p()},0)};break;case"encode":f?h(a.data.buf):m(a.data.buf);break;case"finish":var U;f?U=v(g,d):Flac.isReady()?(c&=Flac.FLAC__stream_encoder_finish(e),console.log("flac finish: "+c),U=b(r,s,F),Flac.FLAC__stream_encoder_delete(e)):console.error("Flac was not initialized: could not encode data!"),y(),self.postMessage({cmd:"end",buf:U}),l=!1}};
},{}]},{},["GYNY"], null)